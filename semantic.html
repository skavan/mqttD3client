<html>
    <head>
        <!-- external css -->
        <link rel="stylesheet" href="css/semantic.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.1/semantic.min.css"/>
        <link rel="stylesheet" type="text/css" href="https://cdn.uni-kl.de/js/datatables/latest/media/css/dataTables.semanticui.css">
        <!-- <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.6/css/jquery.dataTables.min.css"> -->
        <link rel="stylesheet" type="text/css" href="https://cdn.uni-kl.de/js/datatables/latest/extensions/Buttons/css/buttons.semanticui.css">

        
        <!-- external javascript -->
        <script src="https://code.jquery.com/jquery-3.1.1.js"></script>
        <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
        <script type="text/javascript" language="javascript" src="datatables/scrollingResize.js"></script>
        <script src="https://cdn.datatables.net/1.10.16/js/dataTables.semanticui.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/1.5.1/js/dataTables.buttons.min.js"></script>
        <script src="https://cdn.uni-kl.de/js/datatables/latest/extensions/Buttons/js/buttons.semanticui.min.js"></script>
        <script type="text/javascript" language="javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
	    <script type="text/javascript" language="javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.32/pdfmake.min.js"></script>
	    <script type="text/javascript" language="javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.32/vfs_fonts.js"></script>
	    <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/buttons/1.5.1/js/buttons.html5.min.js"></script>
        <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/buttons/1.5.1/js/buttons.print.min.js"></script>
        <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/buttons/1.5.1/js/buttons.colVis.min.js"></script>

    </head>
    <body>
        <div class="container">
            <div class="box main-header">main header</div>
            <div class="box main-content">main content
                <div class="box report-title">report title</div>
                <div class="box report-body">report body
                    <!-- <table id="example" class="ui celled table compact" cellspacing="0" width="100%"> -->
                    <table id="example" class="ui celled compact table nowrap" cellspacing="0" width="100%">
                        <tfoot>
                            <tr>
                                
                            </tr>
                        </tfoot>
                    </table>    
                </div>
                <div class="box report-footer">report footer</div>
            </div>
            <div class="box main-footer">main footer</div>
        </div>

        <script type="text/javascript" charset="utf-8">
            $(document).ready(function() {
                var jsonData=[];
                setupData();
                $(window).resize(processResize)
                .trigger('resize');

                var table = $('#example').DataTable( {
                    data: jsonData,
                    columns: [
                        { data: "date","title": "timestamp" },
                        { data: "topic", "title": "topic" },
                        { data: "payload", "title": "payload" }
                    ],
                    lengthChange: true,
                    scrollResize: true,
                    scrollCollapse: true,
					scrollX: true,
					scrollY: true,
                    paging: false,
                    buttons: [ 'copy', 'excel', 'pdf', 'colvis' ],
                    fnFooterCallback: function(row, data, start, end, display) {
                        console.log("footer");
                        row.innerHTML='<th rowspan="1" colspan="1" style="width: 100%;">' + data.length +  ' records.</th>';
                    },
                    "initComplete": function () {
                        //var api = this.api();
                        //api.$('td').click( function () {
                        //api.search( this.innerHTML ).draw();
                        console.log("inited");
                    },
                    "preDrawCallback": function( settings ) {
                        console.log("predraw");
                        $("dataTables_scrollBody").css({"height": ""});
                        //$('#example tbody').off( 'click', 'td' );
                        
                    }
                    
                } );
            
                table.buttons().container()
                    .appendTo( $('div.eight.column:eq(0)', table.table().container()) );
                function processResize(){
/*                     console.log("resize");
                    $("dataTables_scrollBody").css({"height": ""}); */
                }
                function setupData(){
                    var date1 = new Date(2018,01,01);
                    var date2 = new Date(2018,05,11);
                    for (i = 0; i < 10; i++) { 
                        jElement = {date: randomDate(date1, date2), topic: "/dragonfly/Basement/" + i, payload: i};
                        jsonData.push(jElement);
                    }
                }
                function randomDate(start, end) {
                    var date = new Date(+start + Math.random() * (end - start));
                    return date;
                    }

            } );

            // $('tfoot').remove();
		</script>
    </body>
</html>